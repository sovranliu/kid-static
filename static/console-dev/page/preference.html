<!DOCTYPE html>
<html>
<head>
    @@include('include/head.html',{
    "title":"会员特惠"
    })
    
</head>
<body class="page-header-fixed">
    <div class="overlay"></div>
    <main class="page-content content-wrap">
        @@include('include/navbar.html')
        @@include('include/sidebar.html')
        <div class="page-inner">
            <div class="page-title">
                <h3>会员特惠</h3>
            </div>
            <div id="main-wrapper">
                <div class="row">
                    <div class="col-md-12 ui-sortable">
                        <div class="panel panel-inverse">
                            <div class="panel-body">
                                <div class="table-responsive">
                                    <a href="#modal-dialog" class="js-add btn btn-sm btn-success pull-right mrgb15" data-toggle="modal">新增</a>
                                    <table class="js-table table table-striped table-bordered">
                                        <thead>
                                            <tr role="row">
                                                <th>名称</th>
                                                <th>图片</th>
                                                <th>链接</th>
                                                <th>更新时间</th>
                                                <th>操作</th>
                                            </tr>
                                        </thead>
                                        <tbody class="js-tbody"></tbody>
                                    </table>
                                    <!-- end table -->
                                    <!-- begin paginator -->
                                    <div id="data-table_paginate" class="js-tpage pull-right dataTables_paginate paging_simple_numbers">
                                        <a id="data-table_previous" aria-controls="data-table" class="paginate_button previous disabled">上一页</a>
                                        <span></span>
                                        <a id="data-table_next" aria-controls="data-table" class="paginate_button next">下一页</a>
                                    </div>
                                    <!-- begin paginator -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    <!-- begin dialog -->
            <div id="modal-dialog" class="js-dialog modal fade in" style="display: none;"></div>
    <!-- end dialog -->
        </div>
    </main><!-- Page Content -->
    <div class="cd-overlay"></div>

    <!-- 数据表格模板 -->
    <script id="tpl-tbody" type="x-tmpl-mustache">
        {{#data}}
        <tr data-id="{{id}}">
            <td class="js-td-title limit-width">{{title}}</td>
            <td class="js-td-img limit-width"><img class="preview-img" src="{{imgUrl}}" data-src="{{imgUrl}}"></td>
            <td class="js-td-link limit-width"><a href="{{link}}" target="_blank">{{link}}</a></td>
            <td class="limit-width">{{updateTime}}</td>
            <td>
                <a href="#modal-dialog" data-toggle="modal">
                    <span class="js-edit btn btn-sm btn-success"  data-toggle="tooltip" data-placement="top" title="回复"><i class="fa fa-edit text-edit"></i> 编辑</span>
                </a>
                <a href="#modal-dialog" data-toggle="modal">
                    <span class="js-del btn btn-sm btn-danger"  data-toggle="tooltip" data-placement="top" title="回复"><i class="fa fa-edit text-edit"></i> 删除</span>
                </a>
            </td>
        </tr>
        {{/data}}
    </script>

    <!-- 编辑弹框区域：弹框内容模板 -->
    <script id="tpl-edit-dialog" type="x-tmpl-mustache">
        <div class="modal-dialog" style="width:80%">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4 class="modal-title">{{type}}</h4>
                </div>
                <div class="modal-body">
                    <div class="form-horizontal">
                        <fieldset>
                            <div class="alert alert-message alert-dismissable" style="display:none;">
                                <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
                                <span></span>
                            </div>
                            <div class="form-group">
                                <label class="col-md-2 control-label">名称<i class="form-required">*</i></label>
                                <div class="col-md-6">
                                    <input class="js-title form-control" type="text" value="{{title}}">
                                </div>
                            </div>
                            {{#isEdit}}
                            <div class="form-group">
                                <label class="col-md-2 control-label">图片<i class="form-required">*</i></label>
                                <div class="col-md-4">
                                    <img class="preview-img" src="{{imgUrl}}" data-src="{{imgUrl}}"/>
                                </div>
                                <div class="col-md-2 clearfix" style="float:none">
                                    <a class="js-change-img btn btn-info change-btn">更改</a>
                                </div>
                            </div>
                            {{/isEdit}}
                            <div class="js-upload-img form-group hide">  
                                <label class="col-md-2 control-label">图片 <i class="form-required">*</i></label>
                                <div class="col-md-8">
                                    <span style='color:red;line-height: 30px;'>(仅支持.jpg/.png格式)</span>  
                                </div> 
                            </div>
                            <div class="js-upload-img hide">
                                    <div class="col-md-2"></div>
                                    <div class="col-md-10" style="margin-top:20px;">
                                       <div class="row fileupload-buttonbar" style="margin-bottom:30px;">
                                            <div class="fileupload-file">
                                                <div class="pull-left upload-btn-wrapper" style="cursor: pointer;">
                                                    <span class="btn btn-success fileinput-button">
                                                        <i class="icon-plus icon-white" style="cursor: pointer;"></i>
                                                        <span>选择文件</span>
                                                        <input type="file" name="files" accept="image/jpg, image/jpeg,image/png" class="js-upload-input upload-btn" style="cursor: pointer;">
                                                    </span>
                                                </div>

                                                <div class="col-md-3 js-upload-name text-center upload-filename" style="line-height:32px;"></div>

                                                <div class="col-md-2 js-upload-size text-center upload-filesize" style="line-height:32px;"></div>

                                                <div class="pull-right">
                                                    <button type="submit" class="js-upload-submit btn btn-primary start">
                                                        <i class="icon-upload icon-white"></i>
                                                        <span>上传</span>
                                                    </button>
                                                    <button type="reset" class="js-upload-cancel btn btn-warning cancel">
                                                        <i class="icon-ban-circle icon-white"></i>
                                                        <span>取消</span>
                                                    </button>
                                                    <span class="fileupload-process"></span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="js-img-list img-list-wrapper"></div>
                  
                                    </div>
                                </div> 
                            <div class="form-group">
                                <label class="col-md-2 control-label">链接<i class="form-required">*</i></label>
                                <div class="col-md-8">
                                    <input class="js-link form-control" type="text" value="{{link}}">
                                </div>
                            </div>
                        </fieldset>
                        
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="javascript:;" class="btn btn-sm btn-white" data-dismiss="modal">取消</a>
                    <a href="javascript:;" class="js-save btn btn-sm btn-success" data-id="{{id}}">保存</a>
                </div>
            </div>
        </div>
    </script>
    <!-- 删除弹框区域：弹框内容模板 -->
    <script id="tpl-del-dialog" type="x-tmpl-mustache">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4 class="modal-title">删除</h4>
                </div>
                <div class="modal-body">
                    <div class="alert alert-message alert-dismissable" style="display:none;">
                        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
                        <span></span>
                    </div>
                    确认删除 <b>{{title}}</b>吗？
                </div>
                <div class="modal-footer">
                    <a href="javascript:;" class="btn btn-sm btn-white" data-dismiss="modal">取消</a>
                    <a href="javascript:;" class="js-confirm btn btn-sm btn-success" data-id="{{id}}">保存</a>
                </div>
            </div>
        </div>
    </script>

    <!-- 上传图片区域 -->
    <script id="tpl-img-item" type="x-tmpl-mustache">
            <div class="js-img-item fd-img-item">
                <img src="{{data}}"/>
                <div class="js-img-mask img-mask" style="display:none;">
                    <i class="js-upload-delete img-delete fa fa-trash-o"></i>
                </div>
            </div>
    </script>
    <script data-main="js/boot.js" data-start="js/biz/preference.js" src="js/libs/require.min.js"></script>
    
</body>
</html>